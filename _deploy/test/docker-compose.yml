version: "3.6"

services:

  backend:
    build:
      dockerfile: _build/backend/Dockerfile
      context: .
    image: tafel/admin-backend:${CI_COMMIT_SHORT_SHA}
    container_name: admin_backend_test
    hostname: admin_backend_test
    environment:
      - TZ=Europe/Vienna
    networks:
      - adminnet_test

  frontend:
    build:
      dockerfile: _build/frontend/Dockerfile
      context: .
    image: tafel/admin-frontend:test-${CI_COMMIT_SHORT_SHA}
    container_name: admin_frontend_test
    hostname: admin_frontend_test
    depends_on:
      - backend
    environment:
      - TZ=Europe/Vienna
    networks:
      - adminnet_test

networks:
  adminnet_test:
    name: adminnet_test
