<c-card class="h-100">
  <c-card-header>
    <div class="fw-bold">Status</div>
  </c-card-header>
  <c-card-body>
    <c-row>
      <c-col testid="distribution-state-text" class="fw-bold">
        <h4>{{distribution ? 'Geöffnet' : 'Inaktiv'}}</h4>
      </c-col>
    </c-row>
    <c-row>
      <c-col>
        <button *ngIf="!distribution" cButton
                testid="distribution-start-button"
                (click)="createNewDistribution()">--> Ausgabe öffnen
        </button>
        <button *ngIf="distribution" cButton
                testid="distribution-close-button"
                (click)="showCloseDistributionModal = true">--> Ausgabe schließen
        </button>
      </c-col>
    </c-row>
  </c-card-body>
</c-card>
<c-modal id="closeDistributionModal" #closeDistributionModal testid="distribution-close-modal"
         [(visible)]="showCloseDistributionModal">
  <c-modal-header class="bg-warning">
    <h4 testid="title" class="text-white">
      Ausgabe schließen?
    </h4>
    <button [cModalToggle]="closeDistributionModal.id" cButtonClose></button>
  </c-modal-header>
  <c-modal-body>
    <div class="row mb-3">
      <div class="col">Achtung: Dieser Schritt kann nicht rückgängig gemacht werden!</div>
    </div>
    <div class="row">
      <div class="col-6">
        <button testid="ok-button" cButton class="me-2"
                testid="distribution-close-modal-ok-button"
                (click)="closeDistribution()">OK
        </button>
        <button testid="cancel-button" cButton color="secondary"
                testid="distribution-close-modal-cancel-button"
                (click)="showCloseDistributionModal = false">Abbrechen
        </button>
      </div>
    </div>
  </c-modal-body>
</c-modal>
