<c-row>
  <c-col>
    <c-card>
      <c-card-header>
        <h5>Statistik</h5>
      </c-card-header>
      <c-card-body>
        <c-row>
          <c-col>
            <c-row>
              <c-col class="fw-bold mb-2">Zeitraum</c-col>
            </c-row>
            <c-row>
              <c-col sm="1" class="d-flex flex-row">
                <label class="form-label">von</label>
              </c-col>
              <c-col sm="5" class="d-flex flex-row">
                <input testid="dataRangeFromInput" type="date" class="form-control" [(ngModel)]="dateRangeFrom">
              </c-col>
              <c-col sm="5" class="d-none d-md-flex flex-row">
                <button cButton (click)="onYearSelected(currentYear)">{{ currentYear }}</button>
              </c-col>
            </c-row>
            <c-row class="mt-2">
              <c-col sm="1" class="d-flex flex-row">
                <label class="form-label">bis</label>
              </c-col>
              <c-col sm="5" class="d-flex flex-row">
                <input testid="dataRangeToInput" type="date" class="form-control" [(ngModel)]="dateRangeTo">
              </c-col>
            </c-row>
          </c-col>
          <c-col class="d-md-none d-sm-flex flex-row">
            <button cButton (click)="onYearSelected(currentYear)">{{ currentYear }}</button>
          </c-col>
          <c-col>
            <c-row>
              <c-col class="fw-bold mb-2 mt-3 mt-md-0">Schnellauswahl</c-col>
            </c-row>
            <c-row>
              <c-col sm="5" md="2" class="d-flex flex-row">
                <label class="form-label">Jahr</label>
              </c-col>
              <c-col sm="5" md="5" class="d-flex flex-row">
                <select testid="yearInput" class="form-control" cSelect [ngModel]="undefined" (ngModelChange)="onYearSelected($event)">
                  <option [ngValue]="undefined"></option>
                  @for (year of settings()?.availableYears; track year) {
                    <option [ngValue]="year">{{ year }}</option>
                  }
                </select>
              </c-col>
            </c-row>
            <c-row class="mt-2">
              <c-col sm="2" class="d-flex flex-row">
                <label class="form-label">Ausgabe</label>
              </c-col>
              <c-col sm="5" class="d-flex flex-row">
                <select testid="distributionDateInput" class="form-control" cSelect [ngModel]="undefined" (ngModelChange)="onDistributionSelected($event)">
                  <option [ngValue]="undefined"></option>
                  @for (distribution of settings()?.distributions; track distribution.startDate) {
                    <option [ngValue]="distribution">{{ distribution.startDate | date : 'dd.MM.yyyy' }}</option>
                  }
                </select>
              </c-col>
            </c-row>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
    <c-card class="mt-3">
      <c-card-body>
        {{ statisticsData() }}
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
