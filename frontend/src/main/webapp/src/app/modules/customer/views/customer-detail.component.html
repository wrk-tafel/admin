<div class="row">
  <div class="col-s-auto ml-3 mb-3 mr-3">
    <button testid="editCustomerButton" type="button" class="btn btn-danger" (click)="editCustomer()">Kunde bearbeiten
    </button>
  </div>
  <div class="col-s-auto mb-3">
    <div class="btn-group" dropdown>
      <button testid="printMenuButton" dropdownToggle type="button" class="btn btn-primary dropdown-toggle">
        Daten ausdrucken <span class="caret"></span>
      </button>
      <ul *dropdownMenu class="dropdown-menu" role="menu">
        <li role="menuitem"><a class="dropdown-item" style="cursor: pointer;" testid="printCombinedButton"
                               (click)="printCombined()">Stammdaten + Ausweis</a></li>
        <li class="divider dropdown-divider"></li>
        <li role="menuitem"><a class="dropdown-item" style="cursor: pointer;" testid="printMasterdataButton"
                               (click)="printMasterdata()">Nur Stammdaten</a></li>
        <li role="menuitem"><a class="dropdown-item" style="cursor: pointer;" testid="printIdCardButton"
                               (click)="printIdCard()">Nur Ausweis</a></li>
      </ul>
    </div>
  </div>
</div>
<div class="row flex-wrap">
  <div class="col">
    <div class="card">
      <div class="card-header text-center h5">Hauptbezieher</div>
      <div class="card-body">
        <div class="row">
          <div class="col font-weight-bold">Kundennummer</div>
          <div testid="customerIdText" class="col">{{customerData?.id}}</div>
        </div>
        <div class="row">
          <div class="col font-weight-bold">Name</div>
          <div testid="nameText" class="col">{{customerData?.lastname}} {{customerData?.firstname}}</div>
        </div>
        <div class="row">
          <div class="col font-weight-bold">Geburtsdatum (Alter)</div>
          <div testid="birthDateAgeText" class="col">{{customerData?.birthDate | date : 'dd.MM.yyyy'}} ({{getAge(customerData?.birthDate)}})</div>
        </div>
        <div class="row">
          <div class="col font-weight-bold">Nationalität</div>
          <div testid="countryText" class="col">{{customerData?.country?.name}}</div>
        </div>
        <div class="row">
          <div class="col font-weight-bold">Telefonnummer</div>
          <div testid="telephoneNumberText" class="col"
               [innerHTML]="customerData?.telephoneNumber ? customerData?.telephoneNumber : '-'"></div>
        </div>
        <div class="row">
          <div class="col font-weight-bold">E-Mail</div>
          <div testid="emailText" class="col" [innerHTML]="customerData?.email ? customerData?.email : '-'">
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col font-weight-bold">Adresse</div>
        </div>
        <div class="row">
          <div testid="addressLine1Text" class="col">{{customerData?.address ?
            formatAddressLine1(customerData?.address) : ''}}</div>
        </div>
        <div class="row">
          <div testid="addressLine2Text" class="col"
               [innerHTML]="customerData?.address ? formatAddressLine2(customerData?.address) : ''">
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col font-weight-bold">Arbeitgeber</div>
        </div>
        <div class="row">
          <div testid="employerText" class="col">{{customerData?.employer}}</div>
        </div>
        <div class="row mt-2">
          <div class="col font-weight-bold">
            Einkommen&nbsp;(monatlich)
          </div>
          <div testid="incomeText" class="col">{{customerData?.income}} &euro;</div>
        </div>
        <div class="row">
          <div class="col">
            --> nachgewiesen bis
          </div>
          <div testid="incomeDueText" class="col">{{customerData?.incomeDue | date : 'dd.MM.yyyy'}}</div>
        </div>
        <hr>
        <div class="row">
          <div class="col font-weight-bold">Angelegt</div>
          <div testid="issuedInformation" class="col">am {{customerData?.issuedAt | date : 'dd.MM.yyyy'}}
            von {{formatIssuer(customerData?.issuer)}}</div>
        </div>
        <div class="row">
          <div class="col font-weight-bold"
               [ngClass]="{'bg-success': customerData?.validUntil && isValid(), 'bg-danger': customerData?.validUntil && !isValid()}">
            Gültig&nbsp;bis
          </div>
          <div testid="validUntilText" class="col bg-success"
               *ngIf="customerData?.validUntil && isValid()"
               [innerHTML]="customerData?.validUntil | date : 'dd.MM.yyyy'"></div>
          <div testid="validUntilText" class="col bg-danger"
               *ngIf="customerData?.validUntil && !isValid()"
               [innerHTML]="'-'"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="card">
      <div class="card-header text-center h5">Weitere Personen</div>
      <div class="card-body">
        <div *ngIf="customerData?.additionalPersons.length === 0">
          <h6 testid="nopersons-label">Keine Personen vorhanden</h6>
        </div>
        <div *ngFor="let addPerson of customerData?.additionalPersons; let i = index">
          <hr *ngIf="i > 0">
          <div class="row">
            <div class="col font-weight-bold" [attr.testid]="'addperson-' + i + '-lastnameText'"
                 [innerHTML]="addPerson?.lastname"></div>
            <div class="col font-weight-bold" [attr.testid]="'addperson-' + i + '-firstnameText'"
                 [innerHTML]="addPerson?.firstname"></div>
          </div>
          <div class="row">
            <div class="col-6" [attr.testid]="'addperson-' + i + '-birthDateAgeText'">
              {{customerData?.birthDate | date : 'dd.MM.yyyy'}} ({{getAge(customerData?.birthDate)}})
            </div>
            <div class="col-6" [attr.testid]="'addperson-' + i + '-countryText'">
              {{addPerson?.country.name}}
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-6 font-weight-bold">Einkommen (monatl.)</div>
            <div class="col-6" [attr.testid]="'addperson-' + i + '-incomeText'"
                 *ngIf="addPerson?.income !== null">{{addPerson?.income}} &euro;
            </div>
            <div class="col-6" [attr.testid]="'addperson-' + i + '-incomeText'"
                 *ngIf="addPerson?.income === null">-
            </div>
          </div>
          <div class="row">
            <div class="col-6">--> nachgewiesen bis</div>
            <div class="col-6" [attr.testid]="'addperson-' + i + '-incomeDueText'"
                 *ngIf="addPerson?.incomeDue !== null">{{addPerson?.incomeDue | date : 'dd.MM.yyyy'}}</div>
            <div class="col-6" [attr.testid]="'addperson-' + i + '-incomeDueText'"
                 *ngIf="addPerson?.incomeDue === null">-
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
